<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>繪圖板</title>
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            margin: 0;
        }

        canvas {
            width: 300px;
            height: 300px;
            background-color: #2a6440;
            cursor: cell;
            margin: 80px;
        }
    </style>
</head>
<body>
<canvas></canvas>
<span></span>
<button>下載成果</button>
<img src="" alt=""/>

<script>
    const canvas = document.querySelector('canvas');
    const span = document.querySelector('span');
    const button = document.querySelector('button');
    const img = document.querySelector('img');

    let drawing = false;

    // context = 畫布
    const ctx = canvas.getContext('2d');

    button.addEventListener('click', ev => {

        const image = canvas.toDataURL("image/png");
        img.src = image;

        const a = document.createElement("a"); //Create <a>
        a.href = image; //Image Base64 Goes here
        a.download = "Image.png"; //File name Here
        a.click(); //Downloaded file
    });

    canvas.addEventListener('mousemove', ev => {

        // 繪畫中 , 才會畫出紅色方塊
        if (drawing) {

            const x = ev.offsetX;
            const y = ev.offsetY;

            // draw a red point at ( x , y )
            ctx.fillStyle = 'red';        // 改成用紅筆繪畫
            ctx.fillRect(x, y / 2, 5, 5);     // 劃出正方形在 ( x , y ) 位置
        }
    })

    canvas.addEventListener('mouseup', () => drawing = false)
    canvas.addEventListener('mouseleave', () => drawing = false)
    canvas.addEventListener('mousedown', () => drawing = true)


    canvas.addEventListener('mousemove', ev => {

        const x = ev.offsetX;
        const y = ev.offsetY;
        span.innerText = `( ${x} , ${y} )`;
    })

</script>

</body>
</html>